'use strict';

module.exports = Franz => {
  function getMessages() {
    const indirect_badge = document.getElementsByClassName('mx_RoomSubList_badge');
    let indirect_count = 0;
    if (indirect_badge.length !== 0) {
      indirect_count = indirect_badge.length;
    }

    const direct_badge = document.getElementsByClassName('mx_RoomSubList_badgeHighlight');
    let direct_count = 0;
    if (direct_badge.length !== 0) {
      direct_count = direct_badge.length;
    }
    // set Franz badge
    Franz.setBadge(direct_count, indirect_count);
  }

  // check for new messages every second and update Franz badge
  Franz.loop(getMessages);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJpb3Qvd2Vidmlldy5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiRnJhbnoiLCJnZXRNZXNzYWdlcyIsImluZGlyZWN0X2JhZGdlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaW5kaXJlY3RfY291bnQiLCJsZW5ndGgiLCJkaXJlY3RfYmFkZ2UiLCJkaXJlY3RfY291bnQiLCJzZXRCYWRnZSIsImxvb3AiXSwibWFwcGluZ3MiOiI7O0FBQUFBLE9BQU9DLE9BQVAsR0FBa0JDLEtBQUQsSUFBVztBQUMxQixXQUFTQyxXQUFULEdBQXVCO0FBQ3JCLFVBQU1DLGlCQUFpQkMsU0FBU0Msc0JBQVQsQ0FBZ0Msc0JBQWhDLENBQXZCO0FBQ0EsUUFBSUMsaUJBQWlCLENBQXJCO0FBQ0EsUUFBSUgsZUFBZUksTUFBZixLQUEwQixDQUE5QixFQUFpQztBQUMvQkQsdUJBQWlCSCxlQUFlSSxNQUFoQztBQUNEOztBQUVELFVBQU1DLGVBQWVKLFNBQVNDLHNCQUFULENBQWdDLCtCQUFoQyxDQUFyQjtBQUNBLFFBQUlJLGVBQWUsQ0FBbkI7QUFDQSxRQUFJRCxhQUFhRCxNQUFiLEtBQXdCLENBQTVCLEVBQStCO0FBQzdCRSxxQkFBZUQsYUFBYUQsTUFBNUI7QUFDRDtBQUNEO0FBQ0FOLFVBQU1TLFFBQU4sQ0FBZUQsWUFBZixFQUE2QkgsY0FBN0I7QUFDRDs7QUFFRDtBQUNBTCxRQUFNVSxJQUFOLENBQVdULFdBQVg7QUFDRCxDQW5CRCIsImZpbGUiOiJyaW90L3dlYnZpZXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IChGcmFueikgPT4ge1xuICBmdW5jdGlvbiBnZXRNZXNzYWdlcygpIHtcbiAgICBjb25zdCBpbmRpcmVjdF9iYWRnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ214X1Jvb21TdWJMaXN0X2JhZGdlJyk7XG4gICAgbGV0IGluZGlyZWN0X2NvdW50ID0gMDtcbiAgICBpZiAoaW5kaXJlY3RfYmFkZ2UubGVuZ3RoICE9PSAwKSB7XG4gICAgICBpbmRpcmVjdF9jb3VudCA9IGluZGlyZWN0X2JhZGdlLmxlbmd0aDtcbiAgICB9XG5cbiAgICBjb25zdCBkaXJlY3RfYmFkZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdteF9Sb29tU3ViTGlzdF9iYWRnZUhpZ2hsaWdodCcpO1xuICAgIGxldCBkaXJlY3RfY291bnQgPSAwO1xuICAgIGlmIChkaXJlY3RfYmFkZ2UubGVuZ3RoICE9PSAwKSB7XG4gICAgICBkaXJlY3RfY291bnQgPSBkaXJlY3RfYmFkZ2UubGVuZ3RoO1xuICAgIH1cbiAgICAvLyBzZXQgRnJhbnogYmFkZ2VcbiAgICBGcmFuei5zZXRCYWRnZShkaXJlY3RfY291bnQsIGluZGlyZWN0X2NvdW50KTtcbiAgfVxuXG4gIC8vIGNoZWNrIGZvciBuZXcgbWVzc2FnZXMgZXZlcnkgc2Vjb25kIGFuZCB1cGRhdGUgRnJhbnogYmFkZ2VcbiAgRnJhbnoubG9vcChnZXRNZXNzYWdlcyk7XG59O1xuIl19